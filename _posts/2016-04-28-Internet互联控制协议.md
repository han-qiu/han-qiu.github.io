---
layout: post
title: "Internet 互联控制协议"
publish: true
---

尽力而为的IP传递报文

路由器组成了分布式的路由系统，计算路由有一个收敛的过程

### ICMP(Internet control message protocal)

封装在IP数据包的有效负载部分

最终目的地是处理它的Internet协议软件模块

ICMP不是高层协议，

不具有可靠性和优先级

携带ICMP报文的IP数据报传递时不再报告

携带ICMP报文的IP数据报与携带用户数据的IP数据报具有完全相同的路由选择

### ICMP工作过程

源段必须把差错交给一个应用程序或采取其他措施来纠正

### ICMP ECHO

ping 命令。　

调用ICMP协议，

当路由器无法投递包时

拥塞控制：

重定向：多于一个路由器

TTL

请求子网掩码：

应用：跟踪路径

### Trace root

### 用ICMP发现路径MTU数据报头中的不能分标志位


ipv6不涉及分段

找路径按IP,实际传递用地址解析

### 地址解析需求

网络不知道IP地址后缀和特定计算机之间的关系

物理网络硬件不知道如何用协议地址来定位一台计算机

A 如何知道B　的MAC　地址；

将IP地址解析成相应的硬件地址的过程

###

一台计算机只需要解析连载同一个网络中计算机地址

ARP协议

动态消息交换：需要解析地址时通过网络进行消息通信获得IP地址对应的物理地址

ARP　request

广播

### 动态地址分配

怎么获得

DHCP协议　允许计算机快速，动态获取IP地址　

用户请求IP，

### 地址转换协议

内联网　intranet

可以任意分配I地址　

私有地址

### 内联网如何互联

利用隧道技术将内联网封装成Interneet上的IP包

隧道实际上就是封装

IP in IP

NAT协议：地址转换协议

增加内部网络的安全性

内联网用户需要访问Interneet

DHCP只能部分环节IP地址资源的不足

工作过程：

经过NAT路由器，地址改变
