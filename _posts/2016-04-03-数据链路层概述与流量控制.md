---
layout: post
title: "数据链路层概述与流量控制"
publish: true
---

* TOC
{:toc}

### 向网络层提供的服务
- 无确认的无连接服务
- 有确认的无连接服务
- 面向链接的服务

帧(Frame):在数据链路上交换数据的单位
### DL处理的问题和基本功能
- 如何产生和识别帧（成帧拆帧产生校验码）
- 解决帧损坏，丢失和重复问题（差错控制）
- 防止高速发送数据把低速接受淹没（流量管理）
- 解决确定帧和数据帧竞争线路（链路管理）
- 广播网络如何控制访问共享传输介质（介质访问控制）

数据链路层完成通信两端之间一条路径上每一跳的数据传输

数据链路层是“存储转发”交换技术的基础

### 链路层的实现
网卡硬件/固件和驱动程序
  - 包括软硬件两个部分
  - 衔接物理层和网络层

### 如何形成数据帧(4-1)
- 将上层（网络层）交下来的数据包按照所用协议规定的格式封装成一定形式的帧：
标志+字段（地址字段+控制字段+正文字段+校验字段）
- 考虑双方的同步问题

### 4-2字符计数法
用第一个字节说明帧的长度

计数值传输出错时导致收发双方不同步

### 如何形成数据帧
字符填充的首尾定界法

比特填充的首尾定界法

如果出现了flag？用转义字符：把紧随其后的字符的原有含义转换掉。

### 如何形成数据帧4-4

综合法：
- 用计数值确定帧尾
- 检查帧定界符是否出现在应该出现的地方
- 计算校验和来验证是否传输的数据出错

### 流量控制
流量控制：限制发送方速度的一种机制，使发送速度不能超过接受方处理的速率

流量控制特点
  - 动态的
    - 流量速度与发送相关
    - 流量速度与网络当前拥挤程度有关
  - 有某种反馈机制
    - 使发送方了解接收方当前处理能力

网络层实体控制从数据链路层接收数据速率

数据链路层控制从对等实体接受帧的速度

### 差错控制
顺序到达：指保证所有的帧最终都按正确的发送次序到达目的地

检错和纠错

顺序到达
- 确认方式
  - ACK确认
  - NAK确认
- 计时器
  - 计时器的值设定要保证一帧到达对方并作处理后，相应的确认帧返回

（计时器结合序号才能保证每一帧的正确次序）

### 介质访问控制MAC
MAC:在广播信道中，当信道的使用产生竞争时如何确定信道使用权

广域网：
  - 采用点-点链接，不存在信道竞争问题

局域网
  - 多路复用信道，即多个站点共享同一个传输介质

### 寻址
硬件地址（物理地址）
- 每个网络接口设备在出厂时都有一个全球唯一的固定值

### 数据链路层协议的作用
DL协议的作用就是使不可靠的通信线路变得一定程度的可靠
等停模型

### 停-等流量控制的性能
a=t_prop/tframe

U = 1/(2a+1)

传播延迟 = 链路距离/传播速率

传输时间 = 帧的长度/数据速率

### 滑动窗口流量控制
滑动窗口控制：通过串口控制连续发送的数据量

### 流量控制方式
肯定确认帧RRn（receive-ready)
- 准备接收从n开始的帧

否定确认帧
  - 已接收直到n-1的所有帧，单不能再接收了

双向传输

### 捎带确认技术
既有数据又有确认时，

### 累计确认技术
当收到的帧大于。。。
收到的第i帧有错，马上用NAK应答

### 滑动窗口流量控制性能
U = min{1,N/(2a+1)}

### 管道化技术
带宽与延迟乘积：用来衡量两个之间信道的容量。

## 阅读
- 3.1
- 3.3.1
- 3.4.1
